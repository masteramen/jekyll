---
layout: post
title:  "第一章.良好应用程序基石(2)"
title2:  "第一章.良好应用程序基石(2)"
date:   2017-01-01 23:56:21  +0800
source:  "https://www.jfox.info/%e7%ac%ac%e4%b8%80%e7%ab%a0%e8%89%af%e5%a5%bd%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e5%9f%ba%e7%9f%b32.html"
fileName:  "20170101281"
lang:  "zh_CN"
published: true
permalink: "2017/%e7%ac%ac%e4%b8%80%e7%ab%a0%e8%89%af%e5%a5%bd%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e5%9f%ba%e7%9f%b32.html"
---
{% raw %}
伟大软件的简易三步骤：

1.确认你的软件客户要它做的事。

2.运用基本的OO原则来增加软件的灵活性。

3.努力实现可维护、可重用的设计。

项目架构：

![](4abb0a5.png)

Guitar类：

     1package com.headfirst.guitar;
     2 3publicclass Guitar {
     4private String serialNumber, builder, model, type, backWood, topWood;
     5privatedouble price;
     6 7public Guitar(String serialNumber, double price, String builder, 
     8            String model, String type, String backWood, String topWood){
     9this.serialNumber = serialNumber;
    10this.price = price;
    11this.builder = builder;
    12this.model = model;
    13this.type = type;
    14this.backWood = backWood;
    15this.topWood = topWood;
    16    }
    1718public String getSerialNumber(){
    19return serialNumber;
    20    }
    21publicdouble getPrice(){
    22return price;
    23    }
    24publicvoid setPrice(float newPrice){
    25this.price = newPrice;
    26    }
    27public String getBuilder(){
    28return builder;
    29    }
    30public String getModel(){
    31return model;
    32    }
    33public String getType(){
    34return type;
    35    }
    36public String getBackWood(){
    37return backWood;
    38    }
    39public String getTopWood(){
    40return topWood;
    41    }
    42 }

Inventory类：

     1package com.headfirst.guitar;
     2 3import java.util.Iterator;
     4import java.util.LinkedList;
     5import java.util.List;
     6 7publicclass Inventory {
     8 9private List guitars;
    1011public Inventory(){
    12         guitars = new LinkedList();
    13    }
    1415publicvoid addGuitar(String serialNumber, double price, String builder, String model, String type,
    16            String backWood, String topWood){
    17         Guitar guitar = new Guitar(serialNumber, price, builder, 
    18                model, type, backWood, topWood);
    19        guitars.add(guitar);
    20    }
    2122public Guitar getGuitar(String serialNumber){
    23for(Iterator i = guitars.iterator(); i.hasNext();){
    24             Guitar guitar = (Guitar) i.next();
    25if(guitar.getSerialNumber().equals(serialNumber)){
    26return guitar;
    27            }
    28        }
    2930returnnull;
    31    }
    3233public Guitar search(Guitar searchGuitar){
    34for(Iterator i = guitars.iterator(); i.hasNext();){
    35             Guitar guitar = (Guitar) i.next();
    36             String builder = searchGuitar.getBuilder();
    37if((builder != null) && (!builder.equals("")) && 
    38                     (!builder.equals(guitar.getBuilder())))
    39continue;
    4041             String model = searchGuitar.getModel();
    42if((model != null) && (!model.equals("")) && 
    43                     (!model.equals(guitar.getModel())))
    44continue;
    4546             String type = searchGuitar.getType();
    47if((type != null) && (!type.equals("")) && 
    48                     (!type.equals(guitar.getType())))
    49continue;
    5051             String backWood = searchGuitar.getBackWood();
    52if((backWood != null) && (!backWood.equals("")) && 
    53                     (!backWood.equals(guitar.getBackWood())))
    54continue;
    5556             String topWood = searchGuitar.getTopWood();
    57if((topWood != null) && (!topWood.equals("")) && 
    58                     (!topWood.equals(guitar.getTopWood())))
    59continue;
    60             return guitar;
    61        }
    6263returnnull;
    64    }
    65 }

搜寻测试代码：

     1package com.headfirst.guitar;
     2 3publicclass FindGuitarTester {
     4publicstaticvoid main(String[] args){
     5         Inventory inventory = new Inventory();
     6        initializeInventory(inventory);
     7 8         Guitar whatErinLikes = new Guitar("", 0, "fender", "Stratocastor", "electric", "Alder", "Alder");
     910         Guitar guitar = inventory.search(whatErinLikes);
    11if(guitar != null){
    12             System.out.println("Erin, you might like this " + 
    13             guitar.getBuilder() + " " + guitar.getModel() + 
    14             " " + guitar.getType() + " guitar:n " + 
    15             guitar.getBackWood() + " back and sides,n " +
    16             guitar.getTopWood() + " top.nYou can have it for only $" + 
    17             guitar.getPrice() + "!");
    18         }else{
    19             System.out.println("Sorry, Erin, we have nothing for you.");
    20        }
    21    }
    2223privatestaticvoid initializeInventory(Inventory inventory){
    24         inventory.addGuitar("V95693", 1499.95, "Fender", "Stratocastor", "electric", "Alder", "Alder");
    25    }
    26 }

运行结果：

![](7dfd9e9.png)

为什么，明明有，为什么说没有?

检查了代码，可能搜寻中“fender”的f是小写，而我们有的“Fender”是大写。

好，我们对吉他搜索工具进行第一个改善，去除掉所有String比较：

项目修改架构：

![](563e8dd.png)

Builder.java：

     1package com.headfirst.guitar;
     2 3publicenum Builder {
     4 5    FENDER, MARTIN, GIBSON, COLLINGS, OLSON, RYAN, PRS, ANY;
     6 7public String toString(){
     8switch(this){
     9case FENDER:
    10return "Fender";
    11case MARTIN:
    12return "Martin";
    13case GIBSON:
    14return "Gibson";
    15case COLLINGS:
    16return "Collings";
    17case OLSON:
    18return "Olson";
    19case RYAN:
    20return "Ryan";
    21case PRS:
    22return "Prs";
    23case ANY:
    24return "Any";
    25default: 
    26return "";
    27        }
    28    }
    29 }

Type.java：

     1package com.headfirst.guitar;
     2 3publicenum Type {
     4    ACOUSTIC, ELECTRIC;
     5 6public String toString(){
     7switch(this){
     8case ACOUSTIC: 
     9return "acoustic";
    10case ELECTRIC: 
    11return "electric";
    12default:
    13return "";
    14        }
    15    }
    16 }

Wood.java：

     1package com.headfirst.guitar;
     2 3publicenum Wood {
     4    INDIAN_ROSEWOOD, BRAZILIAN_ROSEWOOD, ALDER;
     5 6public String toString(){
     7switch(this){
     8case INDIAN_ROSEWOOD:
     9return "Indian Rosewood";
    10case BRAZILIAN_ROSEWOOD:
    11return "Brazilian Rosewood";
    12case ALDER:
    13return "Alder";
    14default:
    15return "";
    16        }
    17    }
    18 }

修改FindGuitarTester.java第8行代码：

 1 Guitar whatErinLikes = new Guitar(“”, 0, “Builder.FENDER”, “Stratocastor”, “Type.ELECTRIC”, “Wood.ALDER”, “Wood.ALDER”); 

修改Inventory.java中search()方法：

     1public Guitar search(Guitar searchGuitar){
     2for(Iterator i = guitars.iterator(); i.hasNext();){
     3             Guitar guitar = (Guitar) i.next();
     4 5if(searchGuitar.getBuilder() != guitar.getBuilder())
     6continue;
     7 8             String model = searchGuitar.getModel().toLowerCase();
     9if((model != null) && (!model.equals("")) && 
    10                     (!model.equals(guitar.getModel().toLowerCase())))
    11continue;
    1213if(searchGuitar.getType() != guitar.getType())
    14continue;
    1516if(searchGuitar.getBackWood() != guitar.getBackWood())
    17continue;
    1819if(searchGuitar.getTopWood() != guitar.getTopWood())
    20continue;
    2122return guitar;
    23        }
    2425returnnull;
    26     }

现在我们担心的是Model属性，我们没有把它做成enum，并且Model没有办法限制，所以做不出enum。

除此之外：我们修改的地方还有：

![](8ae29df.png)

各种变量的类型，用enum的全部替换掉。
{% endraw %}